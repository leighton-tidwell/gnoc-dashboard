<html>

<head>
  <title>GNOC DV Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.4/css/buttons.dataTables.min.css" />
  <link rel="stylesheet" href="./css/global.css" />

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/modules/exporting.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/modules/export-data.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/modules/accessibility.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.html5.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.print.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.5.0/jszip.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"></script>
  <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
  <script>

    var uniqueDVs = [];
    var allTicketCount = [];

    /* High Charts Configs */
    var options = {
      chart: {
        renderTo: 'containerGraph',
        type: 'column'
      },
      title: {
        text: 'Tickets per DV'
      },
      xAxis: {
        categories: ['TICKETS'],
        crosshair: true
      },
      yAxis: {
        min: 0,
        title: {
          text: '# of Tickets'
        }
      },
      plotOptions: {
        column: {
          pointPadding: 0.2,
          borderWidth: 0
        }
      },
      lang: {
        noData: "No Data Found"
      },
      noData: {
        style: {
          fontWeight: 'bold',
          fontSize: '15px',
          color: '#303030'
        }
      },
      series: []
    };

    var lineOptions = {
      chart: {
        renderTo: 'top5LineChart',
        type: 'line'
      },
      title: {
        text: 'Monthly Ticket Snapshot',
        align: 'center',
      },
      subtitle: {
        text: 'current year',
        align: 'left'
      },
      xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
          'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
      },
      yAxis: {
        title: {
          text: ' Tickets'
        },
        plotLines: [{
          value: 0,
          width: 1,
          color: '#808080'
        }]
      },
      tooltip: {
        valuePrefix: '',
        valueSuffix: ' Tickets'
      },
      legend: {
        layout: 'horizontal',
        align: 'right',
        verticalAlign: 'top',
        borderWidth: 0,
        marginTop: 5,
        marginBottom: 5
      },
      lang: {
        noData: "No Data Found"
      },
      noData: {
        style: {
          fontWeight: 'bold',
          fontSize: '15px',
          color: '#303030'
        }
      },
      series: []
    };

    var dvOptions = ["ACC", "ACTSECAF", "AD DOAF", "ADNI", "AFCENT", "AFCENTCOM", "AFGHANCOM", "AFGSC", "AG", "AMC", "ANSA", "APNSA", "ASECDEF", "ATTGEN", "AWHCS", "CH", "CIA", "CNGB", "CNO", "COMACC", "COUNSSTATE", "CSAF", "CSARMY", "DCI", "DCIA", "DDNI", "DEPCSWHO", "DEPDIRCIA", "DEPOCI", "DEPSECDEF", "DEPSECSTATE", "DEPWHCOS", "DH", "DHS", "DIRADV", "DIRCIA", "DNI", "DNSA", "DODGC", "DSS", "DUSDP", "EPA ADMIN", "EUCOM", "FLOTUS", "GDSS", "HHS", "IAFCOM", "NGB", "NORTHCOM", "NSA", "OEPOCI", "OUSDP", "PACOM", "PAFCOM", "PDDNI", "PDEL", "PDM", "POONI", "POTUS", "POTUS ASST", "PRESDEL", "REP UN", "RORO", "SAPOTUS", "SECAF", "SECARMY", "SECCOM", "SECCOMMERCE", "SECHHS", "SECINTERIOR", "SECTREAS", "SECVA", "SES", "SLOTUS", "SO", "SOCOM", "SOE", "SOT", "SPEAC", "SPECOPSCO", "SPECOPSCOM", "SRAR", "TBD", "TRANSCOM", "TRNR", "UNKNOWN", "USAFRICOM", "USAMBASSADORUN", "USCENTCOM", "USCYBERCOM", "USD(P\u0026R)", "USDATL", "USDEPPOL", "USDI", "USDP", "USECAF", "USEUROCOMM", "USINDOPACOM", "USKCOM", "USNORTHCOM", "USOCOM", "USPACOM", "USSEN", "USSOCOM", "USSOUTHCOM", "USSPACECOM", "USSPACEFORCE", "USSTRATCOM", "USTRANSCOM", "VCJCS", "VCSAF", "VPOTUS Shadow", "VPSUPPORT", "WHCOS", "WHCS", "WHDEPCS", "WHSM", "WHSUPPORT"];


    $(function () {

      // Global Functions

      $('#tail_select').on('change', function (e) {
        // User has selected a different aircraft
        uniqueDVs = [];
        allTicketCount = [];
        options.series = [];
        var tails = undefined;
        if ($('#tail_select').val() != "") {
          tails = $('#tail_select').val();
        }

        var dvs = undefined;
        if ($('#dv_select').val() != "") {
          dvs = $('#dv_select').val();
        }
        var selected = $(this).val();
        runChart(dvs, $('#start_date').val(), $('#end_date').val(), tails);
      });

      $('#dv_select').on('change', function () {
        // User has selected a different DV
        uniqueDVs = [];
        allTicketCount = [];
        options.series = [];
        var tails = undefined;
        if ($('#tail_select').val() != "") {
          tails = $('#tail_select').val();
        }

        var dvs = undefined;
        if ($('#dv_select').val() != "") {
          dvs = $('#dv_select').val();
        }
        runChart(dvs, $('#start_date').val(), $('#end_date').val(), tails);
      });

      $('#start_date').change(function () {
        var tails = undefined;
        if ($('#tail_select').val() != "") {
          tails = $('#tail_select').val();
        }

        var dvs = undefined;
        if ($('#dv_select').val() != "") {
          dvs = $('#dv_select').val();
        }
        uniqueDVs = [];
        allTicketCount = [];
        options.series = [];
        runChart(dvs, $('#start_date').val(), $('#end_date').val(), tails);
      });

      $('#end_date').change(function () {
        var tails = undefined;
        if ($('#tail_select').val() != "") {
          tails = $('#tail_select').val();
        }

        var dvs = undefined;
        if ($('#dv_select').val() != "") {
          dvs = $('#dv_select').val();
        }
        uniqueDVs = [];
        allTicketCount = [];
        options.series = [];
        runChart(dvs, $('#start_date').val(), $('#end_date').val(), tails);
      });

      var now = new Date();
      var day = ("0" + now.getDate()).slice(-2);
      var month = ("0" + (now.getMonth() + 1)).slice(-2);

      var start_date = now.getFullYear() + "-" + (month) + "-01";
      var end_date = now.getFullYear() + "-" + (month) + "-" + (day);

      $('#start_date').val(start_date);
      $('#end_date').val(end_date);

      // Populate DV Drop down
      var select = document.getElementById('dv_select');
      select.innerHTML = "<optgroup label=\"Top 5\"><option>VPOTUS</option><option>SECDEF</option><option>SECSTATE</option><option>CJCS</option></optgroup>";
      for (var i = 0; i < dvOptions.length; i++) {
        var opt = document.createElement('option');
        opt.innerHTML = dvOptions[i];
        select.appendChild(opt);
      }
      $('.selectpicker').selectpicker('refresh');


      // On page load, settings are blank.
      feather.replace();
      runChart(undefined, start_date, end_date, undefined);
      runLineChart();

    });

    function runChart(listOfDvs, startDate, endDate, listOfTails) {

      // Clear the tickets table is we've already made one, else lets make one.
      if (!$.fn.DataTable.isDataTable('#overviewTickets')) {
        $('#overviewTickets').DataTable({
          dom: 'Bfrtip',
          buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
          ],
          "columnDefs": [
            { "width": "135px", targets: [0, 1, 10] },
            { "width": "300px", targets: [8] }
          ],
          "order": [[0, "desc"]]
        });
      }
      else {
        $('#overviewTickets').DataTable().clear().draw();
      }

      var dvs = [];
      var ticketsPerDv = [];
      if (listOfDvs === undefined) {
        dvs = getAllDvs(startDate, endDate);
      } else {
        dvs = listOfDvs;
      }
      console.log(dvs);
      ticketsPerDv = getTicketsPerDV(dvs, startDate, endDate, listOfTails);

      var counter = 0;
      for (var i = 0; i < ticketsPerDv.length; i++) {
        if (ticketsPerDv[i] == 0) {
          counter++;
        }
      }

      if (counter == ticketsPerDv.length) {
        $("#containerGraph").text("No Data Found");
      }
      else {
        var chart = new Highcharts.Chart(options);
      }
      //alert(options.series[1].data);

    }

    // Function below get ALL dvs/tickets
    function getAllDvs(startDate, endDate) {
      var urlLoad = "https://intelshare.intelink.gov/sites/89cs/GNOC/_api/web/lists/getbytitle('Tickets')/items?$select=DV,Created&$filter=Created le '" + endDate + "' and Created ge '" + startDate + "'&top=5000";
      var allResults = getDvItems(urlLoad);
      
      return uniqueDVs;
    }

    function getDvItems(urlLoad) {
      var allResults = allResults || [];
      $.ajax({
        url: urlLoad,
        async: false,
        method: "GET",
        headers: {
          "Accept": "application/json;odata=verbose"
        },
        success: function (data) {
          allResults = data.d.results;
          for (var i = 0; i < Number(allResults.length); i++) {
            if (allResults[i].DV !== null && jQuery.inArray(allResults[i].DV, uniqueDVs) == -1) {
              uniqueDVs.push(allResults[i].DV);
            }
          }
          console.log(allResults);
          if(data.d.__next){
            urlLoad = data.d.__next;
            console.log(urlLoad);
            getDvItems(urlLoad);
          }
        },
        error: function (data) {
          //alert("Error: " + JSON.stringify(data));
        }
      });
      return allResults;
    }

    function getTicketsPerDV(dvArray, startDate, endDate, tails) {
      var searchText;
      for (var i = 0; i < dvArray.length; i++) {
        searchText = dvArray[i];
        var _count = fetchTicketCount(searchText, startDate, endDate, tails);
        allTicketCount.push(_count);
      }
      return allTicketCount;
    }

    function fetchTicketCount(searchItem, startDate, endDate, tails) {

      var date_specified = 0;
      var tails_specified = 0;

      if (startDate === undefined && endDate === undefined && tails === undefined) {
        // no date no tail
        var urlLoad = "https://intelshare.intelink.gov/sites/89cs/GNOC/_api/web/lists/getbytitle('Tickets')/items?$select=DV,Created,GNOC_Ticket_Number,Date_Opened,Tail_Number,Mission_Number,DV_Impact,Impact_Level,Category,Status,Issue_Description,Last_Reported_Action,Update_Date,CCIR,CCIR_Number,CSO&top=5000&$filter=DV eq '" + encodeURI(searchItem) + "' and Created le '" + endDate + "' and Created ge '" + startDate + "'";
      }
      if (startDate !== undefined && endDate !== undefined && tails == undefined) {
        // date no tail
        date_specified = 1;
        var urlLoad = "https://intelshare.intelink.gov/sites/89cs/GNOC/_api/web/lists/getbytitle('Tickets')/items?$select=DV,Created,GNOC_Ticket_Number,Date_Opened,Tail_Number,Mission_Number,DV_Impact,Impact_Level,Category,Status,Issue_Description,Last_Reported_Action,Update_Date,CCIR,CCIR_Number,CSO&$top=5000&$filter=DV eq '" + encodeURIComponent(searchItem) + "'and Created le '" + endDate + "' and Created ge '" + startDate + "'";
      }
      if (startDate !== undefined && endDate !== undefined && tails !== undefined) {
        // date and tail
        date_specified = 1;
        tails_specified = 1;
        var urlLoad = "https://intelshare.intelink.gov/sites/89cs/GNOC/_api/web/lists/getbytitle('Tickets')/items?$select=DV,Created,GNOC_Ticket_Number,Date_Opened,Tail_Number,Mission_Number,DV_Impact,Impact_Level,Category,Status,Issue_Description,Last_Reported_Action,Update_Date,CCIR,CCIR_Number,CSO&$top=5000&$filter=DV eq '" + encodeURIComponent(searchItem) + "'and Created le '" + endDate + "' and Created ge '" + startDate + "'";

      }
      var myTicketCount = 0;
      $.ajax({
        url: urlLoad,
        async: false,
        method: "GET",
        headers: {
          "Accept": "application/json;odata=verbose"
        },
        success: function (myData) {
          if (myData.d.results.length > 0) {
            if (date_specified == 0 && tails_specified == 0) {
              // just get all from current DVs
              options.series.push({
                name: searchItem,
                data: [myData.d.results.length]
              });
              myTicketCount = myData.d.results.length;
            }
            else if (date_specified == 1 && tails_specified == 0) {
              // date specified without tail or DV
              var total = 0;
              var arrayOfTimes = [];
              var allResults = myData.d.results;
              for (var i = 0; i < Number(allResults.length); i++) {
                var currentCreateDate = allResults[i].Created;
                if (arrayOfTimes.includes(currentCreateDate)) {
                  // dont wanna push any duplicates
                }
                else {
                  if (currentCreateDate <= endDate && currentCreateDate >= startDate) {
                    arrayOfTimes.push(currentTime);
                    var dateOpened = convertTheDate(allResults[i].Date_Opened);
                    var dateUpdated = convertTheDate(allResults[i].Update_Date);
                    $('#overviewTickets').DataTable().row.add([allResults[i].GNOC_Ticket_Number, dateOpened, allResults[i].Tail_Number, allResults[i].Mission_Number, allResults[i].DV, allResults[i].Impact_Level, allResults[i].Category, allResults[i].Status, allResults[i].Issue_Description, allResults[i].Last_Reported_Action, dateUpdated, allResults[i].CCIR_Number, allResults[i].CSO]).draw();
                    total++;
                  }
                }
              }
              if (total != 0) {
                options.series.push({
                  name: searchItem,
                  data: [total]
                });
              }
              myTicketCount = total;
            }
            else if (date_specified == 1 && tails_specified == 1) {
              // Tail is specified 
              var total = 0;
              var arrayOfTimes = [];
              var allResults = myData.d.results;
              for (var i = 0; i < Number(allResults.length); i++) {
                var currentTail = allResults[i].Tail_Number;
                var currentTime = allResults[i].Created;

                if (tails.includes(currentTail) && currentTime <= endDate && currentTime >= startDate) {
                  if (arrayOfTimes.includes(currentTime)) {
                  }
                  else {
                    arrayOfTimes.push(currentTime);
                    var dateOpened = convertTheDate(allResults[i].Date_Opened);
                    var dateUpdated = convertTheDate(allResults[i].Update_Date);
                    $('#overviewTickets').DataTable().row.add([allResults[i].GNOC_Ticket_Number, dateOpened, allResults[i].Tail_Number, allResults[i].Mission_Number, allResults[i].DV, allResults[i].Impact_Level, allResults[i].Category, allResults[i].Status, allResults[i].Issue_Description, allResults[i].Last_Reported_Action, dateUpdated, allResults[i].CCIR_Number, allResults[i].CSO]).draw();
                    total++;
                  }
                }
              }
              if (total != 0) {
                options.series.push({
                  name: searchItem,
                  data: [total]
                });
              }
              myTicketCount = total;
            }
          }
        },
        error: function (data) {
          //alert("Error: " + JSON.stringify(data));
        }
      });

      return myTicketCount;
    }

    function convertTheDate(dateVar) {
      // date conversion
      var convertDate = new Date(dateVar);
      var month = convertDate.getUTCMonth();
      if (convertDate.getUTCMonth() + 1 < 10)
        month = "0" + convertDate.getUTCMonth() + 1;
      else
        month = convertDate.getUTCMonth() + 1;

      var date = convertDate.getUTCDate();
      if (convertDate.getUTCDate() < 10)
        date = "0" + convertDate.getUTCDate();

      var minutes = convertDate.getUTCMinutes();
      if (convertDate.getUTCMinutes() < 10)
        minutes = "0" + convertDate.getUTCMinutes();

      var t = new Date();
      var hours = convertDate.getHours();

      if (convertDate.getHours() < 10)
        hours = "0" + hours;

      var dateString = month + "/" + date + "/" + convertDate.getUTCFullYear() + " " + hours + ":" + minutes;
      return dateString;
    }

    function removeDuplicates(list) {
      var result = [];
      $.each(list, function (i, e) {
        if ($.inArray(e, result) == -1) result.push(e);
      });
      return result.sort();
    }

    function runLineChart(year) {
      var dvList = ["VPOTUS", "SECDEF", "SECSTATE", "CJCS"]; // Top 5
      var startDate;
      var endDate;
      if (year === undefined) {
        var now = new Date();
        year = now.getFullYear();
        startDate = year + "-01-01";
        endDate = year + "-12-31";
      }
      else {
        startDate = year + "-01-01";
        endDate = year + "-12-31";
      }

      // Now, per DV, per month we need ticket counts my guy:

      for (var i = 0; i < dvList.length; i++) {
        var searchItem = dvList[i];
        var urlLoad = "https://intelshare.intelink.gov/sites/89cs/GNOC/_api/web/lists/getbytitle('Tickets')/items?$select=DV,Created&$top=5000&$filter=DV eq '" + encodeURI(searchItem) + "'";
        $.ajax({
          url: urlLoad,
          async: false,
          method: "GET",
          headers: {
            "Accept": "application/json;odata=verbose"
          },
          success: function (data) {
            var total = 0;
            var arrayOfTimes = [];
            var allResults = data.d.results;
            if (Number(allResults.length) > 0) {
              //alert("success");

              for (var n = 0; n < Number(allResults.length); n++) {
                // so we put all the times of this DV's tickets in an array for post processing
                var currentTime = allResults[n].Created;

                if (arrayOfTimes.includes(currentTime)) {
                  // this is to make sure no duplicates are included.
                }
                else {

                  arrayOfTimes.push(currentTime);
                }
              }

              var yearlyTicketNumbers = [];
              // Now we need to loop, per month.
              for (var j = 1; j < 13; j++) {
                total = 0;
                if (j < 10) {
                  var currentMonth = "0" + j;
                }
                else {
                  var currentMonth = j;
                }

                var startDate = year + "-" + currentMonth + "-01";
                var endDate = year + "-" + currentMonth + "-31";

                for (var k = 0; k < arrayOfTimes.length; k++) {
                  if (arrayOfTimes[k] <= endDate && arrayOfTimes[k] >= startDate) {
                    total++;
                  }
                }
                yearlyTicketNumbers.push(total);
              }
              lineOptions.series.push({
                name: searchItem,
                data: yearlyTicketNumbers
              });
            }
          },
          error: function (data) {
            //alert("Error: " + JSON.stringify(data));
          }
        });
      }
      var lineChart = new Highcharts.Chart(lineOptions);
    }
  </script>
</head>

<body>
  <nav class="navbar navbar-dark bg-dark flex-md-nowrap p-0">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="./index.html">
      <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-broadcast-pin" fill="currentColor"
        xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd"
          d="M3.05 3.05a7 7 0 0 0 0 9.9.5.5 0 0 1-.707.707 8 8 0 0 1 0-11.314.5.5 0 0 1 .707.707zm2.122 2.122a4 4 0 0 0 0 5.656.5.5 0 0 1-.708.708 5 5 0 0 1 0-7.072.5.5 0 0 1 .708.708zm5.656-.708a.5.5 0 0 1 .708 0 5 5 0 0 1 0 7.072.5.5 0 1 1-.708-.708 4 4 0 0 0 0-5.656.5.5 0 0 1 0-.708zm2.122-2.12a.5.5 0 0 1 .707 0 8 8 0 0 1 0 11.313.5.5 0 0 1-.707-.707 7 7 0 0 0 0-9.9.5.5 0 0 1 0-.707zM6 8a2 2 0 1 1 2.5 1.937V15.5a.5.5 0 0 1-1 0V9.937A2 2 0 0 1 6 8z" />
      </svg> &nbsp;
      <b>GNOC DV Dashboard</b>
    </a>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <nav class="col-md-2 d-none d-md-block bg-light sidebar">
        <div class="sidebar-sticky">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active" href="./index.html">
                <span data-feather="home"></span>
                Dashboard <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./flightschedule.html">
                <span data-feather="clock"></span>
                Flight Schedule
              </a>
            </li>
          </ul>
          <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>Trouble Tickets</span>
            <a class="d-flex align-items-center text-muted" href="./createTTS.html">
              <span data-feather="plus-circle"></span>
            </a>
          </h6>
          <ul class="nav flex-column mb-2">
            <li class="nav-item">
              <a class="nav-link" href="./createTTS.html">
                <span data-feather="file"></span>
                Create a TTS
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./createMasterTTS.html">
                <span data-feather="file"></span>
                Create a Master TTS
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./viewTickets.html">
                <span data-feather="file-text"></span>
                View Tickets
              </a>
            </li>
            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
              <span>Flight Tickets</span>
              <a class="d-flex align-items-center text-muted" href="./createFlightTicket.html">
                <span data-feather="plus-circle"></span>
              </a>
            </h6>
            <ul class="nav flex-column mb-2">
              <li class="nav-item">
                <a class="nav-link" href="./createFlightTicket.html">
                  <span data-feather="file"></span>
                  Create a Flight Ticket
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./viewFlightTickets.html">
                  <span data-feather="file-text"></span>
                  View Flight Tickets
                </a>
              </li>
            </ul>
        </div>
      </nav>
      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
        <div
          class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
              <a class="nav-link active" id="home-tab" data-toggle="tab" href="./index.html" role="tab"
                aria-controls="home" aria-selected="true">Overview</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="profile-tab" href="./dvdetails.html" role="tab" aria-controls="profile"
                aria-selected="false">DV Details</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="contact-tab" href="./opentickets.html" role="tab" aria-controls="contact"
                aria-selected="false">Open Tickets</a>
            </li>
          </ul>
        </div>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
            <h1 class="mt-5">
              Dashboard Overview
            </h1>
            <hr>
            <div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-gear-fill" fill="currentColor"
                      xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                        d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 0 0-5.86 2.929 2.929 0 0 0 0 5.858z" />
                    </svg>&nbsp;
                    <b>Set Parameters</b>
                  </div>
                  <div class="card-body">
                    <div class="form-group row">
                      <label for="example-date-input" class="col-2 col-form-label">Start Date</label>
                      <div class="col-4">
                        <input class="form-control" name="start_date" type="date" id="start_date">
                      </div>
                      <label for="example-date-input" class="col-2 col-form-label">End Date</label>
                      <div class="col-4">
                        <input class="form-control" name="end_date" type="date" id="end_date">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="dv_select" class="col-2 col-form-label">Select DVs </label>
                      <select class="selectpicker col-4" id="dv_select" data-live-search="true" data-actions-box="true"
                        multiple title="Choose one of the following...">
                      </select>
                      <label for="tail_select" class="col-2 col-form-label">Select Aircraft </label>
                      <select class="selectpicker col-4" id="tail_select" data-live-search="true"
                        data-actions-box="true" multiple title="Choose one of the following...">
                        <optgroup label="PAG">
                          <option>28000</option>
                          <option>29000</option>
                          <option>90015</option>
                          <option>90016</option>
                          <option>90017</option>
                          <option>90018</option>
                        </optgroup>
                        <optgroup label="ANDREWS">
                          <option>80001</option>
                          <option>80002</option>
                          <option>90003</option>
                          <option>90004</option>
                          <option>10015</option>
                          <option>10040</option>
                          <option>20042</option>
                          <option>60500</option>
                          <option>90525</option>
                          <option>10550</option>
                          <option>81942</option>
                          <option>81947</option>
                          <option>70400</option>
                          <option>70401</option>
                          <option>90402</option>
                          <option>90404</option>
                        </optgroup>
                        <optgroup label="RAMSTEIN">
                          <option>10029</option>
                          <option>10030</option>
                          <option>10076</option>
                        </optgroup>
                        <optgroup label="HICKAM">
                          <option>10028</option>
                          <option>10065</option>
                        </optgroup>
                        <optgroup label="OTHER">
                          <option>IVE I</option>
                          <option>IVE II</option>
                          <option>SAP</option>
                          <option>SE1</option>
                          <option>SE2</option>
                          <option>VIPER 1</option>
                          <option>VIPER 2</option>
                          <option>VIPER 3</option>
                          <option>VIPER 4</option>
                        </optgroup>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <div class="row">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-sticky-fill" fill="currentColor"
                      xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                        d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1h-11zm6 8.5v4.396c0 .223.27.335.427.177l5.146-5.146a.25.25 0 0 0-.177-.427H9.5a1 1 0 0 0-1 1z" />
                    </svg>&nbsp;
                    <b>Tickets Per DV</b>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-12">
                        <div id="containerGraph" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="sr-only">Loading...</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-calendar-range-fill"
                      fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                        d="M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5zM16 7V5H0v5h5a1 1 0 1 1 0 2H0v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9h-6a1 1 0 1 1 0-2h6z" />
                    </svg>&nbsp;
                    <b>Monthly Ticket Snapshot</b>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-12">
                        <div id="top5LineChart" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="sr-only">Loading...</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <div class="card">
              <div class="card-header">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-sticky-fill" fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd"
                    d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1h-11zm6 8.5v4.396c0 .223.27.335.427.177l5.146-5.146a.25.25 0 0 0-.177-.427H9.5a1 1 0 0 0-1 1z" />
                </svg>&nbsp;
                <b>Tickets Per DV</b>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-12">
                    <br />
                    <table id="overviewTickets" class="display" style="width:100%">
                      <thead>
                        <tr>
                          <th>ADW Ticket #</th>
                          <th>Date Opened</th>
                          <th>Tail #</th>
                          <th>Mission #</th>
                          <th>DV</th>
                          <th>DV Impact</th>
                          <th>Category</th>
                          <th>Status</th>
                          <th>Issue Description</th>
                          <th>Last Reported Action</th>
                          <th>Update Date</th>
                          <th>CCIR #</th>
                          <th>CSO</th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                      <tfoot>
                        <tr>
                          <th>ADW Ticket #</th>
                          <th>Date Opened</th>
                          <th>Tail #</th>
                          <th>Mission #</th>
                          <th>DV</th>
                          <th>DV Impact</th>
                          <th>Category</th>
                          <th>Status</th>
                          <th>Issue Description</th>
                          <th>Last Reported Action</th>
                          <th>Update Date</th>
                          <th>CCIR #</th>
                          <th>CSO</th>
                        </tr>
                      </tfoot>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
      <br />
      <footer class="py-4 col-md-2 bg-light" style="box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);">
        <div class="container-fluid">
          <div class="d-flex align-items-center justify-content-between small">
            <div class="text-muted">GNOC DV Dashboard - maintained by GNOC @ JBA<br />
              <a href="mailto:89CS.SCOV.VIP.COMM@us.af.mil">89CS.SCOV.VIP.COMM@us.af.mil</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>
</body>

</html>